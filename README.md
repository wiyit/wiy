# wiyå“²å­¦
- **æç®€**ï¼šæŠ›å¼ƒç¹çï¼Œç›´è¾¾æœ¬è´¨ã€‚
- **é…ç½®å¼**ï¼šè®©é€»è¾‘éšäºé…ç½®ã€‚
- **æ¨¡å—åŒ–**ï¼šæ¨¡æ¿ã€æ ·å¼ã€é€»è¾‘ã€èµ„æºï¼Œçš†å¯è‡ªç”±æ‹¼è£…ã€‚
- **ç»„ä»¶åŒ–**ï¼šç»„ä»¶èŒè´£åˆ†æ˜ï¼Œç»§æ‰¿ä¸å¤ç”¨ï¼Œéšå¿ƒæ‰€æ¬²ã€‚
- **å“åº”å¼**ï¼šæ•°æ®å¾®åŠ¨ï¼Œå…¨å±€å…±é¸£ã€‚
# wiyèµ·æ­¥
åˆ›å»ºä¸€ä¸ªwiyé¡¹ç›®ï¼š
```shell
npm create @wiyit/wiy
```
ä¸Šé¢å‘½ä»¤æ‰§è¡Œåéœ€è¦è®¾ç½®ä¸€ä¸ªé¡¹ç›®åç§°ï¼Œç„¶åæ ¹æ®æç¤ºè¿›è¡Œæ“ä½œï¼Œç›´åˆ°é¡¹ç›®åˆ›å»ºæˆåŠŸã€‚

å‡è®¾é¡¹ç›®åç§°ä¸ºï¼šwiy-exampleï¼Œå½“é¡¹ç›®åˆ›å»ºæˆåŠŸåï¼Œå³å¯è¿›è¡Œåç»­æ“ä½œï¼š
```shell
cd wiy-example/
npm install
npm run dev
```
ä»¥ä¸Šå‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä¼šè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µï¼Œå¦‚æœçœ‹åˆ°â€œWelcome to wiy!â€å­—æ ·ï¼Œæ­å–œä½ ï¼ä½ çš„wiyé¡¹ç›®å¯åŠ¨æˆåŠŸäº†ï¼
## é¡¹ç›®ç»“æ„
ä¸€ä¸ªwiyé¡¹ç›®çš„ç»“æ„é€šå¸¸å¦‚ä¸‹ï¼š
```
/								é¡¹ç›®æ ¹ç›®å½•
â”£â” public/						å­˜æ”¾å…¬å…±æ–‡ä»¶ï¼Œå¦‚favicon.icoç­‰æ–‡ä»¶ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¸ä¼šè¢«wiy-cliæ‰€æ„å»º
â”£â” src/							å­˜æ”¾æºä»£ç æ–‡ä»¶ï¼Œè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ä¼šè¢«wiy-cliæ‰€æ„å»º
â”ƒ	â”£â” assets/					å­˜æ”¾å…¬å…±èµ„æºæ–‡ä»¶ï¼ŒåŒ…æ‹¬å…¬å…±çš„æ¨¡æ¿ã€æ ·å¼ã€å­—ä½“ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€svgã€jsonç­‰å„ç§èµ„æº
â”ƒ	â”£â” components/				å­˜æ”¾ç»„ä»¶ç›¸å…³æ–‡ä»¶ï¼Œè¯¥ç›®å½•ä¸‹çš„ç»„ä»¶å¯æ ¹æ®å…·ä½“æƒ…å†µå†åˆ’åˆ†ä¸åŒå±‚çº§çš„ç›®å½•
â”ƒ	â”ƒ	â”£â” component1/			å­˜æ”¾æŸä¸ªç»„ä»¶çš„ç›¸å…³æ–‡ä»¶
â”ƒ	â”ƒ	â”ƒ	â”£â” assets/			å­˜æ”¾è¯¥ç»„ä»¶å†…éƒ¨ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ï¼ŒåŒ…æ‹¬å­—ä½“ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€svgã€jsonç­‰å„ç§èµ„æº
â”ƒ	â”ƒ	â”ƒ	â”£â” component1.css	è¯¥ç»„ä»¶çš„æ ·å¼æ–‡ä»¶
â”ƒ	â”ƒ	â”ƒ	â”£â” component1.html	è¯¥ç»„ä»¶çš„æ¨¡æ¿æ–‡ä»¶
â”ƒ	â”ƒ	â”ƒ	â”—â” component1.js	è¯¥ç»„ä»¶çš„é€»è¾‘æ–‡ä»¶ï¼Œä¹Ÿæ˜¯è¯¥ç»„ä»¶çš„å…¥å£æ–‡ä»¶
â”ƒ	â”ƒ	â”—â” ...					å…¶ä»–ç»„ä»¶â€¦â€¦
â”ƒ	â”£â” pages/					å­˜æ”¾é¡µé¢ç»„ä»¶ç›¸å…³æ–‡ä»¶ï¼Œè¯¥ç›®å½•ä¸‹çš„ç»“æ„ä¸componentsç›¸ä¼¼
â”ƒ	â”—â” app.js					åº”ç”¨æ–‡ä»¶ï¼Œä¹Ÿæ˜¯è¯¥é¡¹ç›®çš„å…¥å£æ–‡ä»¶
â”£â” package.json					Node.jsçš„é¡¹ç›®é…ç½®æ–‡ä»¶
â”—â” wiy.config.*.js				wiyé…ç½®æ–‡ä»¶ï¼Œå¯æ ¹æ®å…·ä½“æƒ…å†µåˆ’åˆ†ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œå¦‚devã€testã€prodç­‰
```
# wiyæ¦‚å¿µ
åœ¨wiyçš„ä¸–ç•Œä¸­ï¼Œ`åº”ç”¨ï¼ˆappï¼‰`æ˜¯ç”±ä¸€ç³»åˆ—`ç»„ä»¶ï¼ˆcomponentï¼‰`ç»„åˆè€Œæˆçš„ï¼Œè€Œ`ç»„ä»¶`åˆæ˜¯ç”±ä¸€ç³»åˆ—`æ¨¡å—ï¼ˆmoduleï¼‰`æ‹¼è£…è€Œæˆçš„ã€‚
## åº”ç”¨ app
å®šä¹‰äº†ä»¥ä¸‹å†…å®¹ï¼š
- åº”ç”¨å¼•ç”¨çš„é¡µé¢ç»„ä»¶
- åº”ç”¨é¦–é¡µ
- åº”ç”¨ç”Ÿå‘½å‘¨æœŸ

ä¸€ä¸ªåº”ç”¨çš„ç¤ºä¾‹å¦‚ä¸‹ï¼ˆapp.jsï¼‰ï¼š
```javascript
import wiy from '@wiyit/wiy';

new wiy.App({
    pages: {//è¯¥åº”ç”¨å¼•ç”¨çš„é¡µé¢ç»„ä»¶ï¼Œkeyæ˜¯é¡µé¢è®¿é—®è·¯å¾„ï¼Œvalueæ˜¯åŠ¨æ€å¯¼å…¥çš„é¡µé¢ç»„ä»¶
        'page/first': import('./pages/page1/page1.js'),
        'page/second': import('./pages/page2/page2.js'),
    },
    index: 'page/first',//åº”ç”¨é¦–é¡µè®¿é—®è·¯å¾„
    lifecycle: {//å„ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°
        init() {
            console.log('åº”ç”¨åˆå§‹åŒ–æˆåŠŸ');
        },
    },
});
```
## ç»„ä»¶ component
å®šä¹‰äº†ä»¥ä¸‹å†…å®¹ï¼š
- ç»„ä»¶æ¨¡æ¿
- ç»„ä»¶æ ·å¼
- ç»„ä»¶å¼•ç”¨çš„å…¶ä»–ç»„ä»¶
- ç»„ä»¶æ•°æ®
- ç»„ä»¶æ–¹æ³•
- ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

ä¸€ä¸ªç»„ä»¶çš„ç¤ºä¾‹å¦‚ä¸‹ï¼ˆä¾‹å¦‚component1.jsï¼‰ï¼š
```javascript
export default {
    template: import('./component1.html'),//åŠ¨æ€å¯¼å…¥çš„æ¨¡æ¿
    style: import('./component1.css'),//åŠ¨æ€å¯¼å…¥çš„æ ·å¼
    components: {//è¯¥ç»„ä»¶å¼•ç”¨çš„å…¶ä»–ç»„ä»¶ï¼Œkeyæ˜¯ä½¿ç”¨è¯¥ç»„ä»¶æ—¶æ‰€ç”¨çš„æ ‡ç­¾åç§°ï¼Œvalueæ˜¯åŠ¨æ€å¯¼å…¥çš„ç»„ä»¶
        Component2: import('../component2/component2.js'),
        Component3: import('../component3/component3.js'),
    },
    data: {//ç»„ä»¶çš„æ‰€æœ‰æ•°æ®
        currentTime: new Date(),
    },
    methods: {//ç»„ä»¶çš„æ‰€æœ‰æ–¹æ³•
        updateTime() {
            this.currentTime = new Date();
        },
    },
    lifecycle: {//å„ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°
        init() {
            setInterval(() => {
                this.updateTime();
            }, 1000);
        },
    },
};
```
## æ¨¡å— module
æ¨¡å—æ˜¯ç»„ä»¶ä¸­ä¼šç”¨åˆ°çš„å„ç§èµ„æºï¼ŒåŒ…æ‹¬æ¨¡æ¿ã€æ ·å¼ã€å­—ä½“ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€svgã€jsonç­‰å„ç§èµ„æºã€‚æ¨¡å—æœ‰ä»¥ä¸‹å‡ ç§ä½¿ç”¨æ–¹å¼ï¼š
- åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ã€‚æ”¯æŒä½¿ç”¨æ¨¡æ¿ã€æ ·å¼ã€jsonç­‰æ¨¡å—ï¼Œä¾‹å¦‚åœ¨component1.jsä¸­ï¼š
  ```javascript
  export default {
      template: import('./component1.html'),//ä½¿ç”¨æ¨¡æ¿
      style: import('./component1.css'),//ä½¿ç”¨æ ·å¼
      methods: {
          async loadJson() {
              const module = await import('./assets/info.json');//ä½¿ç”¨json
              console.log(module.default);
          },
      },
  };
  ```
- åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚æ”¯æŒä½¿ç”¨å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ã€svgç­‰æ¨¡å—ï¼Œä¾‹å¦‚åœ¨component1.htmlä¸­ï¼š
  ```html
  <!-- ä½¿ç”¨å›¾ç‰‡ -->
  <img src="./assets/image.png" />
  <!-- ä½¿ç”¨svg -->
  <img src="./assets/loading.svg" />
  <!-- ä½¿ç”¨éŸ³é¢‘ -->
  <audio src="./assets/audio.wav"></audio>
  <!-- ä½¿ç”¨è§†é¢‘ -->
  <video src="./assets/video.mp4"></video>
  ```
- åœ¨æ ·å¼ä¸­ä½¿ç”¨ï¼Œæ”¯æŒä½¿ç”¨æ ·å¼ã€å­—ä½“ã€å›¾ç‰‡ã€svgç­‰æ¨¡å—ï¼Œä¾‹å¦‚åœ¨component1.cssä¸­ï¼š
  ```css
  /* ä½¿ç”¨æ ·å¼ */
  @import url('../../assets/common.css');

  @font-face {
      font-family: 'font-name';
      /* ä½¿ç”¨å­—ä½“ */
      src: url('../../assets/font.woff');
  }

  div {
      /* ä½¿ç”¨å›¾ç‰‡ */
      background-image: url('./assets/image.png');
  }

  .loading {
      /* ä½¿ç”¨svg */
      background-image: url('./assets/loading.svg');
  }
  ```
# wiyèƒ½åŠ›
## æ¨¡æ¿æ¸²æŸ“
æ”¯æŒmustacheè¯­æ³•æ¨¡æ¿æ¸²æŸ“ï¼Œæ”¯æŒtextèŠ‚ç‚¹å†…å®¹ã€å±æ€§èŠ‚ç‚¹å†…å®¹çš„æ¸²æŸ“ã€‚é€šè¿‡åŒå¤§æ‹¬å·å°†è¡¨è¾¾å¼çš„å€¼æ¸²æŸ“åˆ°htmlä¸­ã€‚

æä¾›htmlï¼š
```html
<div id="{{this.objId}}">{{this.objName}}</div>
```
æä¾›jsï¼š
```javascript
export default {
    data: {
        objId: 23,
        objName: 'ğŸŒ',
    },
}
```
ä½ å°†å¾—åˆ°ï¼š
```html
<div id="23">ğŸŒ</div>
```
## æ¡ä»¶æ¸²æŸ“ wiy:if
æ”¯æŒæ ¹æ®ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼æ§åˆ¶æ˜¯å¦æ¸²æŸ“ã€‚

æä¾›htmlï¼š
```html
<div wiy:if="this.objId1 < 23">{{this.objName1}}</div>
<div wiy:if="this.objId2 < 23">{{this.objName2}}</div>
```
æä¾›jsï¼š
```javascript
export default {
    data: {
        objId1: 22,
        objName1: 'ğŸŒ',
        objId2: 24,
        objName2: 'ğŸŒ›',
    },
}
```
ä½ å°†å¾—åˆ°ï¼š
```html
<div>ğŸŒ</div>
```
## åˆ—è¡¨æ¸²æŸ“ wiy:for
æ”¯æŒæ ¹æ®ä¸€ä¸ªè¡¨è¾¾å¼çš„é¡¹ç›®æ¥æ¸²æŸ“å¤šé¡¹å†…å®¹ã€‚wiy:foræ”¯æŒæ•°ç»„ã€å¯¹è±¡ï¼Œå¦å¤–è¿˜å¯é€šè¿‡wiy:for.keyå’Œwiy:for.valueæ¥è‡ªå®šä¹‰keyå’Œvalueçš„å˜é‡åã€‚

æä¾›htmlï¼š
```html
<div wiy:for="this.objList" wiy:for.key="k" wiy:for.value="v">{{k}}: {{v}}</div>
<br>
<div wiy:for="this.objMap">{{key}}: {{value}}</div>
```
æä¾›jsï¼š
```javascript
export default {
    data: {
        objList: ['ğŸŒŒ', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ›', 'ğŸª', 'ğŸŒŸ', 'ğŸŒ '],
        objMap: {
            a: 'ğŸŒŒ',
            b: 'ğŸŒ',
            c: 'ğŸŒ',
            d: 'ğŸŒ›',
            e: 'ğŸª',
            f: 'ğŸŒŸ',
            g: 'ğŸŒ ',
        },
    },
}
```
ä½ å°†å¾—åˆ°ï¼š
```html
<div>0: ğŸŒŒ</div>
<div>1: ğŸŒ</div>
<div>2: ğŸŒ</div>
<div>3: ğŸŒ›</div>
<div>4: ğŸª</div>
<div>5: ğŸŒŸ</div>
<div>6: ğŸŒ </div>
<br>
<div>a: ğŸŒŒ</div>
<div>b: ğŸŒ</div>
<div>c: ğŸŒ</div>
<div>d: ğŸŒ›</div>
<div>e: ğŸª</div>
<div>f: ğŸŒŸ</div>
<div>g: ğŸŒ </div>
```
## äº‹ä»¶ç»‘å®š wiy:onxxxx
æ”¯æŒç»™æ ‡ç­¾ç»‘å®šäº‹ä»¶ã€‚wiy:onåç´§è·Ÿäº‹ä»¶ç±»å‹ï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚æ”¯æŒåŸç”Ÿäº‹ä»¶åŠç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ”¯æŒå†…è”è¡¨è¾¾å¼æˆ–å‡½æ•°å¼•ç”¨ã€‚

æä¾›htmlï¼š
```html
<button wiy:onclick="this.currentObjIndex = (this.currentObjIndex + 1) % this.objList.length">
    {{this.objList[this.currentObjIndex]}}
</button>
<button wiy:onclick="this.onButtonClick">
    {{this.objList[this.currentObjIndex]}}
</button>
```
æä¾›jsï¼š
```javascript
export default {
    data: {
        objList: ['ğŸŒŒ', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ›', 'ğŸª', 'ğŸŒŸ', 'ğŸŒ '],
        currentObjIndex: 0,
    },
    methods: {
        onButtonClick() {
            this.currentObjIndex = (this.currentObjIndex + 1) % this.objList.length
        },
    },
};          
```
ä½ å°†å¾—åˆ°ä¸¤ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»ä»»ä½•ä¸€ä¸ªæŒ‰é’®ï¼Œéƒ½ä¼šåœ¨æŒ‰é’®ä¸Šè½®æµå±•ç¤ºå„ä¸ªå¤©ä½“ï¼š

![image](https://github.com/user-attachments/assets/34867787-9713-4fc2-8e1a-17c97598e948)
## æ•°æ®ç»‘å®š wiy:data
æ”¯æŒç»™æ ‡ç­¾ç»‘å®šæ•°æ®ã€‚æ”¯æŒåŸç”Ÿè¡¨å•æ ‡ç­¾ï¼ˆinputã€textareaã€selectï¼‰åŠè‡ªå®šä¹‰ç»„ä»¶ï¼Œæ•°æ®ä¸ºåŒå‘ç»‘å®šã€‚

æä¾›htmlï¼š
```html
<input wiy:data="this.a1" type="checkbox" />{{this.a1}}
<button wiy:onclick="this.a1 =! this.a1">ç‚¹æˆ‘</button>
<hr>
<input wiy:data="this.a2" type="radio" />{{this.a2}}
<button wiy:onclick="this.a2 =! this.a2">ç‚¹æˆ‘</button>
<hr>
<input wiy:data="this.a3" type="text" />{{this.a3}}
<button wiy:onclick="this.a3 += 'ğŸŒ'">ç‚¹æˆ‘</button>
<hr>
<textarea wiy:data="this.a4"></textarea>
<pre>{{this.a4}}</pre>
<button wiy:onclick="this.a4 += 'ğŸŒ'">ç‚¹æˆ‘</button>
<hr>
<select wiy:data="this.a5">
    <option value="">è¯·é€‰æ‹©ï¼š</option>
    <option value="1">ä¸€</option>
    <option value="2">äºŒ</option>
    <option value="3">ä¸‰</option>
</select>{{this.a5}}
<button wiy:onclick="this.a5 = this.a5 % 3 + 1">ç‚¹æˆ‘</button>
```
æä¾›jsï¼š
```javascript
export default {
    data: {
        a1: false,
        a2: true,
        a3: 'ğŸŒ',
        a4: 'ğŸŒ\nğŸŒ›\nğŸª\nğŸŒŸ',
        a5: 2,
    },
};          
```
ä½ å°†å¾—åˆ°å¤šä¸ªè¡¨å•æ ‡ç­¾ï¼Œå…¶æ•°æ®å®ç°äº†åŒå‘ç»‘å®šï¼š

![image](https://github.com/user-attachments/assets/ff0372c5-ef47-48e8-8e93-36b1616f47a8)
## å“åº”å¼æ›´æ–°
## æ•°æ®è§‚å¯Ÿå™¨
## äº‹ä»¶æœºåˆ¶
æ”¯æŒäº‹ä»¶æœºåˆ¶ã€‚åœ¨é€»è¾‘ä¸­ä½¿ç”¨this.onã€this.offã€this.triggerå‡½æ•°å³å¯å®ç°äº‹ä»¶çš„ç›‘å¬åŠè§¦å‘ã€‚

æä¾›jsï¼š
```javascript
export default {
    methods: {
        foo() {
            // ç›‘å¬äº‹ä»¶
            this.on('customevent', (e) => {
                console.log('got event', e);            
            });
            // åœæ­¢ç›‘å¬äº‹ä»¶
            this.off('customevent');
        },
        bar() {
            // è§¦å‘äº‹ä»¶ï¼Œå¹¶ä¼ é€’æ•°æ®
            this.trigger('customevent', {
                a: 22,
                b: 23,           
            });
        },
    }
}
```
## æ¨¡æ¿ç®¡ç†
æ”¯æŒå¼•å…¥æ¨¡æ¿ã€‚åªéœ€è¦åœ¨é€»è¾‘ä¸­é…ç½®æ¨¡æ¿æ–‡ä»¶çš„å¼•å…¥è·¯å¾„ï¼Œå³å¯ä½¿ç”¨è¯¥æ¨¡æ¿è¿›è¡Œæ¸²æŸ“ã€‚éœ€è¦ä½¿ç”¨wiy-cliæ„å»ºé¡¹ç›®ã€‚

æä¾›jsï¼š
```javascript
export default {
    template: import('./template.html'),
}
```
## æ ·å¼ç®¡ç†
æ”¯æŒå¼•å…¥æ ·å¼ã€‚åªéœ€è¦åœ¨é€»è¾‘ä¸­é…ç½®æ ·å¼æ–‡ä»¶çš„å¼•å…¥è·¯å¾„ï¼Œå³å¯å°†æ ·å¼åº”ç”¨äºæ¨¡æ¿ã€‚éœ€è¦ä½¿ç”¨wiy-cliæ„å»ºé¡¹ç›®ã€‚

æä¾›jsï¼š
```javascript
export default {
    style: import('./style.css'),
}
```
## ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ
## ç»„ä»¶ç»§æ‰¿
## è·¯ç”±
## æ’ä»¶

